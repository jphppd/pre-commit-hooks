#!/usr/bin/env bash
set -eEu
set -o pipefail

################################################################################
# Fail if any shell script filename does not have a ".sh" extension.
#
# pre-commit uses the "identify" pure python library to detect shell files.
################################################################################

declare -i RC=0

has_sh_extension() {
    declare -r filename="$1"
    [[ "${filename}" =~ \.sh$ ]]
}

for filename in "${@}"; do
    if has_sh_extension "${filename}"; then
        echo "[OK]    ${filename}"
    else
        echo "[ERROR] ${filename} lacks the required .sh extension"
        RC=1
    fi
done

exit $RC
